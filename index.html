<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Operation Project Numero Uno</title>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.2/css/all.css">
    <link rel="stylesheet" href="style.css">
    <script src="https://code.jquery.com/jquery-3.4.1.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
</head>

<body>
    <div class="wrapper">
        <div class="container-fluid">
            <div class="jumbotron text-center">
                <h1>Forbade</h1>
                <p>Charlie, Frank, and Ben bring you the apocalypse.</p>
            </div>
        </div>
        <div class="container">
            <div id="choices">
                <button class="choice-button find-food">Find Food</button>
                <button class="choice-button find-water">Find Water</button>
                <button class="choice-button find-medicine">Find Medicine</button>
            </div>

        </div>
        <footer id="player-status-interface">
            <div id="player-status" class="container">
                <div class="status-item"><i class="fas fa-heart"></i> Health: <span id="health">10</span></div>
                <div class="status-item"><i class="fas fa-drumstick-bite"></i> Hunger: <span id="hunger">0</span></div>
                <div class="status-item"><i class="fas fa-tint-slash"></i> Thirst: <span id="thirst">0</span></div>
            </div>
        </footer>
    </div>
</body>
<!-- Required to use google places on client side -->
<!-- <div id="map"></div>
<script src="utility.js"></script>
<script async defer type="text/javascript"
    src="https://maps.googleapis.com/maps/api/js?key=apikey&libraries=places&callback=initialize">
</script> -->
<script src="index.js"></script>
<script>
    class DB {
        constructor() {
            this.storage = window.localStorage;
            this.getPlayer = this.getPlayer.bind(this)
            this.addPlayer = this.addPlayer.bind(this)
            this.updatePlayer = this.updatePlayer.bind(this)
            this.removePlayer = this.removePlayer.bind(this)
            this.nuclearBomb = this.nuclearBomb.bind(this)
        }

        addPlayer(str, obj) {
            if (this.storage.getItem(str)) {
                console.log(`Player already exists!!`);
            } else {
                this.storage.setItem(str, JSON.stringify(obj))
                console.log(`Player ${str} created`)
            }
        }

        getPlayer(str) {
            if (!this.storage.getItem(str)) {
                console.log(`Player not found!`)
            } else {
                const player = JSON.parse(this.storage.getItem(str))
                console.log(`player -->`, player)
                return player
            }
        }

        updatePlayer(str, obj) {
            this.storage.removeItem(str);
            this.storage.setItem(str, JSON.stringify(obj))
            console.log(`update obj-->`, obj)
            return obj;
        }

        removePlayer(str) {
            this.storage.removeItem(str);
        }

        listAllPlayers() {
            console.log(Object.keys(this.storage))
            return Object.keys(this.storage)
        }

        listAllPlayerObjects() {
            const allKeys = [];
            const keys = Object.keys(this.storage);
            let i = keys.length;

            while (i--) {
                allKeys.push(this.storage.getItem(keys[i]))
            }
            console.log(`allKeys-->`, allKeys)
            return allKeys;
        }

        allStorage() {
            const storageObj = {};
            const keys = Object.keys(this.storage)
            let i = keys.length;

            while (i--) {
                storageObj[keys[i]] = JSON.parse(this.storage.getItem(keys[i]));
            }
            console.log(`STORAGE OBJECT---->`, storageObj)
            return storageObj;
        }

        nuclearBomb() {
            this.storage.clear();
        }
    }


    // Setup a player object
    var player = {
        health: 10,
        hunger: 0,
        thirst: 0
    }

    // Adjust points on location change
    $('.choice-button').on('click', function() {
        // subtract health if hunger or thirst are too high
        if (player.hunger > 8) {
            player.health--;
        }
        if (player.thirst > 8) {
            player.health--;
        }

        // Default hunger and thirst updates
        player.hunger++;
        player.thirst += 2;

        if ($(this).hasClass("find-food")) {
            if (player.hunger > 0) {
                player.hunger -= 3;
            }
            if (player.hunger < 1) {
                player.hunger = 0;
            }
        }

        if ($(this).hasClass("find-water")) {
            if (player.thirst > 0) {
                player.thirst -= 3;
            }
            if (player.thirst < 1) {
                player.thirst = 0;
            }
        }

        if ($(this).hasClass("find-medicine")) {
            player.health += 3;
        }


        // Update display
        $("#health").text(player.health);
        $("#hunger").text(player.hunger);
        $("#thirst").text(player.thirst);
    });
</script>

</html>